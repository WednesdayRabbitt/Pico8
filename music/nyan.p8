pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
------------functions-----------

--draws a star at (x,y)
function star(x,y,start)
	local	frame=73+(start+o)%6
	if(frame==79)then
		frame=73+start+o
	end
	spr(frame,x,y,1,1)
end

--generates coordinates for stars
function star_gen()
	local a=flr(rnd(10))
	if (a==1) then
		local x=flr(pop+80)
		local y=flr(rnd(128))
		local start=flr(rnd(6))
		add(stars,{x,y,start})
	end
end

--draws all the stars in stars{}
function star_draw()
	for i=1,#stars do
		star(stars[i][1],stars[i][2],stars[i][3])
	end
end

--the rainbow
function rainbow()
	for i=1,18 do
		for j=pop-50,pop do
			pset(j,i+pos.y+4+2*sin(j/23),7.7+i/3)
		end
	end
end


--control nyan cat
function move()
--[[
	if(btn(2))then
		pos.y-=1
	elseif(btn(3))then
		pos.y+=1
	end
--]]
end


function nyan_cat()
	rainbow()
--paws
 for j=1,4 do
		spr((48+j*16)+o,pop+paw[j][1],pos.y+paw[j][2],1,1)
 end
--pop tart
	spr(4,pop,pos.y,3,3)
--tail
	spr(9+o,pop-8,pos.y+9,1,2)
--funny rainbow
if(funny)then spr(71,300,55,2,3) end
--face
	spr(7,pop+head.x,pos.y+head.y,2,2)
end

-->8
--------------init--------------

function _init()
	funny=false
	
	music(0)
	pal(5,0)
	t=0

	pos={}
	pos.x=50
	pos.y=50

	head={}
	head.x=10
	head.y=8

	stars={}

	paw={
	{-3,15},
	{1,15},
	{12,15},
	{17,15}}
end
-->8
--------------draw--------------

function _draw()
	nyan_cat()

 star_draw()


--prints value of t
--	print(t,pop-5,pos.y-5,8)

--prints coordinates of stars
--[[
 for i=1,#stars do for j=1,3 do
 	print(stars[i][j],j*25+t*3,i*6)
 end end
--]]
end
-->8
-------------update-------------


function _update()
	cls(1)
	t+=1/2
	camera(t*3,0)
 pop=pos.x+t*3
	o=(t%6)
	star_gen()
	move()

--very funny
	if(funny)then
	 if(t>81)then
	 	head.y+=1
	 	head.x+=1/2
	 end
	end
--animates poptart and head
	if (o==1) then
		head.x+=1
	elseif (o==2) then
		pos.y+=1
	elseif (o==4) then
		head.x-=1
	elseif (o==5) then
		head.y-=1
	elseif (o==0) then
		pos.y-=1
		head.y+=1
	end
	
end
__gfx__
11111111111111111111111111111111000000000000000000000000005500000000550000555500000000000000000000000000000000000005500000000000
11111111111111111111111111111111000000000000000000000000056650000005665000566550000550000000000000000000055555000056650000000000
11111111000000000000000001111111000000000000000000000000056665000056665000556655005665000000000000000000566665550056655500000000
11111110fffffffffffffffff0111111005555555555555555500000056666555566665000055665005665550000000500000055556666650005666600000000
1111110fffeeeeeeeeeeeeefff01111105fffffffffffffffff50000056666666666665000005566000566660005555500005566005555560000556600000000
1111110ffeeeeee8ee8eeeeeff0111115fffeeeeeeeeeeeeefff5000566666666666666500000555000055660556666600056666000000550000005500000000
1111110fee8eeeeeeeeeeeeeef0111115ffeeeeee8ee8eeeeeff5000566675666667566500000005000000550566665500566555000000000000000000000000
1111110feeeeeeeeee00ee8eef0100115fee8eeeeeeeeeeeeeef5000566655666565566500000000000000000055555000566500000000000000000000000000
1111110feeeeeeeee0660eeeef0066015feeeeeeeeeeeeee8eef500056ee666666666ee500000000000000000000000000055000000000000000000000000000
0000110feeeeee8ee06660eeef0666015feeeeeeeeeeeeeeeeef500056ee656656656ee500000000000000000000000000000000000000000000000000000000
0660010feeeeeeeee0666600006666015feeeeee8eeeeeeeeeef5000056665555555665000000000000000000000000000000000000000000000000000000000
0066000feee8eeeee0666666666666015feeeeeeeeeeeeeeeeef5000005666666666650000000000000000000000000000000000000000000000000000000000
1006600feeeeeee806666666666666605feee8eeeeeeeeeeeeef5000000555555555500000000000000000000000000000000000000000000000000000000000
1100660fe8eeeeee06667066666706605feeeeeee8eeeeeeeeef5000000000000000000000000000000000000000000000000000000000000000000000000000
1110000feeeeeeee06660066606006605fe8eeeeeeeeeeeeeeef5000000000000000000000000000000000000000000000000000000000000000000000000000
1111110feeeee8ee06ee666666666ee05feeeeeeeeeeeeeeeeef5000000000000000000000000000000000000000000000000000000000000000000000000000
1111110ffe8eeeee06ee606606606ee05feeeee8eeeeeeeeeeef5000000000000000000000000000000000000000000000000000000000000000000000000000
1111110fffeeeeeee0666000000066015ffe8eeeeeeeeeeeeeff5000000000000000000000000000000000000000000000000000000000000000000000000000
11111000ffffffffff066666666660115fffeeeeeeeeeeeeefff5000000000000000000000000000000000000000000000000000000000000000000000000000
1111066600000000000000000000011105fffffffffffffffff50000000000000000000000000000000000000000000000000000000000000000000000000000
11110660010660111110660106601111005555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000
11110000110001111111000110011111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000888888888888888800000000000000000000000000070000000700000007000000000000
00000000000000000000000000000000000000000000000000000000888888888888888800000000000000000007000000070000070007000000000000000000
00000000000000000000000000000000000000000000000000000000888888888888888800000000000700000007000000000000000000000000000000000000
00000000000000000000000000000000005000000050000000000000999999999999999900070000007070000770770077070770700000707000007000000000
00555000000500000000500000050000055550000565500000000000999999999999999900000000000700000007000000000000000000000000000000000000
05666000005666000005666000566600566650005666500000000000999999999999999900000000000000000007000000070000070007000000000000000000
05665500005665000005665000566500566500005665000000000000aaaaaaaaaaaaaaaa00000000000000000000000000070000000700000007000000000000
05555000005550000005550000555000555000005550000000000000aaaaaaaaaaaaaaaa00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000aaaaaaaaaaaaaaaa00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbb00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbb00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbb00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000cccccccccccccccc00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000cccccccccccccccc00000000000000000000000000000000000000000000000000000000
00056650000566500000566500056650056650000566500000000000cccccccccccccccc00000000000000000000000000000000000000000000000000000000
00055500000055500000055500005550005550000555000000000000222222222222222200000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000222222222222222200000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000222222222222222200000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05665000005665000005665000566500566500005665000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00555000000555000000555000055500055500005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00550000000550000000550000055000055000000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00665000000665000000665000066500066500000665000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05665000005665000005665000566500566500005665000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00550000000555000000555000055500055500000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010d000027050280502a050000002f0502805027050280502a0502f0503305034050330502e0502f050000002a0500000027050280502a050000002f0502f050310502e0502f0503105034050330503405031050
010d00002a7502a7552c7502c755267552775027755257552675525755237502375523750237552575025755267502675526755257552375525755277552a7552c755277552a7552575527755237552575523755
010d000027750277552a7502a7552c755277552a75525755277552375526755277552675525755237552575526750267552375525755277552a75525755267552575523755257502575523750237552575025755
010d000027750277552a7502a7552c755277552a75525755277552375526755277552675525755237552575526750267552375525755277552a75525755267552575523755257502575523750237552375023755
010d000010050100551c0501c05512050120551e0501e0550f0500f0551b0501b055140501405520050200550d0500d055190501905512050120551e0501e0550b055170550b0500b0550d0500d0550f0500f055
010d000023750237551e7552075523750237551e75520755237552575527755237552875527755287552a755237502375523750237551e75520755237551e755287552775525755237551c7551b7551c7551e755
010d000023750237551e7552075523750237551e7552075523755237552575527755237551e755207551e75523750237552375522755237551e75520755237552875527755287552a75523750237552275022755
010d000023750237551e7552075523750237551e7552075523755237552575527755237551e755207551e75523750237552375522755237551e75520755237552875527755287552a75523750237552575025755
__music__
00 00424344
01 01044344
00 02044344
00 01044344
00 03044344
00 05044344
00 06044344
00 05044344
02 07044344

